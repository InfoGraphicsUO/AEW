<html>

<head>


  <style>
    /* Adobe Fonts (McClean Gonzalez's account */
    @import url("https://use.typekit.net/uye5etk.css");
    @import url("https://use.typekit.net/ttx2mek.css");

    svg {
      max-height: calc(100vh - 10px);
      max-width: calc(100vw - 10px);
    }

    .selectedProtest{
            fill:red!important;
            stroke:black !important;
            stroke-width:3 !important;
            fill-opacity:0.7;
        }

    #tooltip{
        position: absolute;
        top: 50px;
        right: 50px;
        padding: 10px;
        background-color: rgba(255, 255, 255, 0.897);
        max-width: 25%;
        font-family: "freight-sans-pro", sans-serif;
    }

    #Pies_to_fade,#Institutions_to_Fade {
      pointer-events: none;
    }

    .selectedIsnt{
      font-weight: 900;
      fill: red;
    }

  </style>


</head>

<body>

<!-- CREATES TOOL TIP DIV - TEXT WILL BE REPLACED WITH PROTEST DATA ON HOVER -->
  <div id="mapDiv"></div>
  <div id="tooltip">Hover on each dot for description of Protest</div>

<!-- LOAD D3 LIBRARY -->
  <script src="https://d3js.org/d3.v5.min.js"></script>



  <!-- JSON of Attribute Table -->
  <script>
  
        // example data access: protest_data.tooltips["Water-1"].Year

    var fire_data = {
      "fireData": {
        "2018_01":{"LabelName":"Little Wilson","DeploymentRecordName":"116 Wilson Prairie","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":189.5,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":189.5,"Latitude":"","Longitude":""},
        "2018_02":{"LabelName":"Simmons","DeploymentRecordName":"Astoria - Simmons Ridge  | Simmons Ridge Fire","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":30,"SRCI":0,"TRCI":0,"WCCF":0,"Total":30,"Latitude":"","Longitude":""},
        "2018_03":{"LabelName":"Gold Crk.","DeploymentRecordName":"Astoria- Gold Creek | Gold Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":30,"SRCI":0,"TRCI":0,"WCCF":0,"Total":30,"Latitude":"","Longitude":""},
        "2018_04":{"LabelName":"Bear Springs","DeploymentRecordName":"Bear Springs","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":29,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":29,"Latitude":"","Longitude":""},
        "2018_05":{"LabelName":"Beaver Crk.","DeploymentRecordName":"Beaver Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":40,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":40,"Latitude":"","Longitude":""},
        "2018_06":{"LabelName":"Bill Crk.","DeploymentRecordName":"Bill Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":19,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":19,"Latitude":"","Longitude":""},
        "2018_07":{"LabelName":"Bradley Flat","DeploymentRecordName":"Bradley Flat","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":20,"WCCF":0,"Total":20,"Latitude":"","Longitude":""},
        "2018_08":{"LabelName":"Bryant 192","DeploymentRecordName":"Bryant","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":30,"Total":30,"Latitude":"","Longitude":""},
        "2018_09":{"LabelName":"Cabbage","DeploymentRecordName":"Cabbage Fire","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":20,"WCCF":0,"Total":20,"Latitude":"","Longitude":""},
        "2018_10":{"LabelName":"Calamity","DeploymentRecordName":"Calamity","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":10,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_11":{"LabelName":"CF 400","DeploymentRecordName":"CF 400","MissingLocation":0,"Preposition":0,"CCCF":10,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_12":{"LabelName":"CF 400 #2","DeploymentRecordName":"CF 400 #2","MissingLocation":0,"Preposition":0,"CCCF":40,"DRCI":0,"MCCF":10,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":10,"SRCI":0,"TRCI":0,"WCCF":0,"Total":60,"Latitude":"","Longitude":""},
        "2018_13":{"LabelName":"CFPA July Pre-Position","DeploymentRecordName":"CFPA July Preposition","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":60,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":60,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_14":{"LabelName":"CFPA - 4 Mile Guard Pre-Position","DeploymentRecordName":"CFPA PrePo - 4 Mile Guard","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":40,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":40,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_15":{"LabelName":"CFPA  - Carpenteville Hwy Pre-Position","DeploymentRecordName":"CFPA PrePo - Carpenteville Hwy","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":9,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":9,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_16":{"LabelName":"CFPA - Coos Bay Pre-Position","DeploymentRecordName":"CFPA PrePo - Coos Bay","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":38,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":38,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_17":{"LabelName":"CFPA - Euchre Crk. Pre-Position","DeploymentRecordName":"CFPA PrePo - Euchre Creek","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":10,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_18":{"LabelName":"CFPA Pre-Position","DeploymentRecordName":"CFPA pre-position","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":98,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":98,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_19":{"LabelName":"Chapman Grange #1","DeploymentRecordName":"Chapman Rd. #1","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":20,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":220,"SRCI":0,"TRCI":0,"WCCF":0,"Total":240,"Latitude":"","Longitude":""},
        "2018_20":{"LabelName":"Curry Complex","DeploymentRecordName":"Curry Complex","MissingLocation":1,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":78,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":78,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_21":{"LabelName":"Dorris Crk.","DeploymentRecordName":"Dorris Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":100,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":172,"SRCI":0,"TRCI":0,"WCCF":0,"Total":272,"Latitude":"","Longitude":""},
        "2018_22":{"LabelName":"Douglas Hill","DeploymentRecordName":"Douglas Hill","MissingLocation":0,"Preposition":0,"CCCF":20,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":20,"Latitude":"","Longitude":""},
        "2018_23":{"LabelName":"Drift Crk.","DeploymentRecordName":"Drift Creek","MissingLocation":0,"Preposition":0,"CCCF":40,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":40,"Latitude":"","Longitude":""},
        "2018_24":{"LabelName":"East Crk.","DeploymentRecordName":"East Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":60,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":40,"SRCI":0,"TRCI":0,"WCCF":0,"Total":100,"Latitude":"","Longitude":""},
        "2018_25":{"LabelName":"Eli Crk.","DeploymentRecordName":"Eli Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":10,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":24,"WCCF":0,"Total":34,"Latitude":"","Longitude":""},
        "2018_26":{"LabelName":"Ellendale","DeploymentRecordName":"Ellendale Fire","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":10,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":10,"SRCI":0,"TRCI":0,"WCCF":0,"Total":20,"Latitude":"","Longitude":""},
        "2018_27":{"LabelName":"Fall Crk.","DeploymentRecordName":"Fall Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":60,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":78,"SRCI":0,"TRCI":0,"WCCF":0,"Total":138,"Latitude":"","Longitude":""},
        "2018_28":{"LabelName":"Gard Rd.","DeploymentRecordName":"Gard Road","MissingLocation":0,"Preposition":0,"CCCF":20,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":20,"Latitude":"","Longitude":""},
        "2018_29":{"LabelName":"Garner RD","DeploymentRecordName":"Garner Complex","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":412,"SFFC":220,"SRCI":984,"TRCI":0,"WCCF":162,"Total":1778,"Latitude":"","Longitude":""},
        "2018_30":{"LabelName":"Grabhorn","DeploymentRecordName":"Grabhorn","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":80,"SRCI":0,"TRCI":0,"WCCF":0,"Total":80,"Latitude":"","Longitude":""},
        "2018_31":{"LabelName":"Graham","DeploymentRecordName":"Graham","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":140,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":120,"SFFC":120,"SRCI":0,"TRCI":0,"WCCF":0,"Total":380,"Latitude":"","Longitude":""},
        "2018_32":{"LabelName":"Greener Rd.","DeploymentRecordName":"Greener Road","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":20,"SRCI":0,"TRCI":0,"WCCF":0,"Total":20,"Latitude":"","Longitude":""},
        "2018_33":{"LabelName":"Horse Crk. Bridge","DeploymentRecordName":"Horse Creek Bridge","MissingLocation":0,"Preposition":0,"CCCF":10,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_34":{"LabelName":"Horsfall Beach","DeploymentRecordName":"Horsfall Beach","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":38,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":38,"Latitude":"","Longitude":""},
        "2018_35":{"LabelName":"Hwy 22","DeploymentRecordName":"Hwy 22","MissingLocation":0,"Preposition":0,"CCCF":20,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":20,"Latitude":"","Longitude":""},
        "2018_36":{"LabelName":"Kimmel","DeploymentRecordName":"Kimmel Fire","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":60,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":264,"SRCI":0,"TRCI":10,"WCCF":0,"Total":334,"Latitude":"","Longitude":""},
        "2018_37":{"LabelName":"Kinzua Complex","DeploymentRecordName":"Kinzua Complex","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":170,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":218,"TRCI":0,"WCCF":0,"Total":88,"Latitude":"","Longitude":""},
        "2018_38":{"LabelName":"Klamath Hills","DeploymentRecordName":"Klamath Hills","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":10,"Total":10,"Latitude":"","Longitude":""},
        "2018_39":{"LabelName":"Lampa Mt./Ln.","DeploymentRecordName":"Lampa Mountain/Lane","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":110,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":110,"Latitude":"","Longitude":""},
        "2018_40":{"LabelName":"Little Rail","DeploymentRecordName":"Little Rail","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":32,"WCCF":0,"Total":32,"Latitude":"","Longitude":""},
        "2018_41":{"LabelName":"Lobster Crk.","DeploymentRecordName":"Lobster Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":891,"SCI":0,"SFFC":140,"SRCI":0,"TRCI":0,"WCCF":0,"Total":1031,"Latitude":"","Longitude":""},
        "2018_42":{"LabelName":"Mile Post 163","DeploymentRecordName":"Mile Post 163","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":120,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":120,"Latitude":"","Longitude":""},
        "2018_43":{"LabelName":"Morris Crk.","DeploymentRecordName":"Morris Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":10,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_44":{"LabelName":"North Spit","DeploymentRecordName":"North Spit","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":10,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_45":{"LabelName":"ODF S Crk./Central","DeploymentRecordName":"ODF S Creek/Central fire","MissingLocation":0,"Preposition":0,"CCCF":10,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_46":{"LabelName":"ODF Severity 2018 Pre-Position","DeploymentRecordName":"ODF Severity 2018","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":10,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_47":{"LabelName":"Old Pittsburg - Indistrict","DeploymentRecordName":"Old Pittsburg - Indistrict","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":80,"SRCI":0,"TRCI":0,"WCCF":0,"Total":80,"Latitude":"","Longitude":""},
        "2018_48":{"LabelName":"Pierce Rd.","DeploymentRecordName":"Pierce Road","MissingLocation":0,"Preposition":0,"CCCF":10,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_49":{"LabelName":"Pongratz","DeploymentRecordName":"Pongratz Fire","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":10,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_50":{"LabelName":"Rabbit Hill","DeploymentRecordName":"Rabbit Hill","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":42,"Total":42,"Latitude":"","Longitude":""},
        "2018_51":{"LabelName":"Ramsey Canyon","DeploymentRecordName":"Ramsey Canyon","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":180,"SFFC":74,"SRCI":0,"TRCI":0,"WCCF":90,"Total":344,"Latitude":"","Longitude":""},
        "2018_52":{"LabelName":"Retz Crk.","DeploymentRecordName":"Retz Creek","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":18,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":18,"Latitude":"","Longitude":""},
        "2018_53":{"LabelName":"Rye Hill","DeploymentRecordName":"Rye Hill","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":10,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_54":{"LabelName":"2018 Santiam Pre-Position","DeploymentRecordName":"Santiam Pre-Position","MissingLocation":0,"Preposition":1,"CCCF":70,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":70,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_55":{"LabelName":"Seven Devils Rd","DeploymentRecordName":"Seven Devils Rd","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":79,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":79,"Latitude":"","Longitude":""},
        "2018_56":{"LabelName":"Shearer Hill","DeploymentRecordName":"Shearer Hill | Timmerman Rd","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":80,"SRCI":0,"TRCI":0,"WCCF":0,"Total":80,"Latitude":"","Longitude":""},
        "2018_57":{"LabelName":"Silver Crk.","DeploymentRecordName":"Silver Creek | Silver Creek Cleanup","MissingLocation":0,"Preposition":0,"CCCF":140,"DRCI":0,"MCCF":20,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":70,"SRCI":0,"TRCI":0,"WCCF":0,"Total":230,"Latitude":"","Longitude":""},
        "2018_58":{"LabelName":"South Valley Rd.","DeploymentRecordName":"South Valley Road","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":90,"MCCF":0,"OSCI":0,"PRCF":90,"SCCI":0,"SCI":80,"SFFC":150,"SRCI":0,"TRCI":0,"WCCF":0,"Total":410,"Latitude":"","Longitude":""},
        "2018_59":{"LabelName":"Timber Jct HWY 26","DeploymentRecordName":"Timber 26 Junction","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":10,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_60":{"LabelName":"Train Smokey 2018","DeploymentRecordName":"Train Smokey 2018","MissingLocation":0,"Preposition":1,"CCCF":0,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":20,"SRCI":0,"TRCI":0,"WCCF":0,"Total":20,"Latitude":44.187871,"Longitude":-124.341487},
        "2018_61":{"LabelName":"Valley View","DeploymentRecordName":"Valley View","MissingLocation":0,"Preposition":0,"CCCF":10,"DRCI":0,"MCCF":0,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":0,"SRCI":0,"TRCI":0,"WCCF":0,"Total":10,"Latitude":"","Longitude":""},
        "2018_62":{"LabelName":"Wagner 2","DeploymentRecordName":"Wagner Complex","MissingLocation":0,"Preposition":0,"CCCF":0,"DRCI":0,"MCCF":421,"OSCI":0,"PRCF":0,"SCCI":0,"SCI":0,"SFFC":2495,"SRCI":0,"TRCI":0,"WCCF":0,"Total":2916,"Latitude":"","Longitude":""}
    }
  };

  </script>


<!-- REPOPULATE TOOL TIPS WITH PROTEST DATA -->
<script>

  //-----LOAD SVG----- 
    d3.xml("https://infographicsuo.github.io/AEW/Carceral_Interactive_Maps/2018/2018_Pie_Map_Illustrator_Flattened_20230731-01.svg") 
        .then(data => {
        d3.select("#mapDiv").nodes().forEach(n => {
            n.append(data.documentElement.cloneNode(true))
        })

        doThings();
    });


     // on sucessful load 
     function doThings(){    
        console.log("doing things")
        // d3.select(document.getElementById("2018_11")).classed("selectedProtest", true)

        // ---- CREATE TOOLTIP FOR EACH PROTEST ----
      
        // Select all Protests based on ID and object type 
        d3.selectAll("#Outlines>circle,#Outlines>path,#Outlines>ellipse")

                  
        // let selectedYear = protest_data.tooltips[].Year

                  //  .attr("title","I am a circle!")
                   
                  //Function which replaces Text in Tool Tip DIV with the Data for the protest being hovered on
                   .on("mouseover", function(d,i) { 
                        console.log("this =", this)

                        // Capture institutional tabs
                        var sciText = d3.select("#legend_sci")
                        var srciText = d3.select("#legend_srci")
                        var sffcText = d3.select("#legend_sffc")
                        var trciText = d3.select("#legend_trci")
                        var wccfText = d3.select("#legend_wccf")
                        var cccfText = d3.select("#legend_cccf")
                        var mccfText = d3.select("#legend_mccf")
                        var drciText = d3.select("#legend_drci")
                        var prcfText = d3.select("#legend_prcf")
                        var scciText = d3.select("#legend_scci")

                        // properties we want from each data
                        var propertiesToCapture = ["CCCF", "DRCI", "MCCF", "PRCF", "SCCI", "SCI", "SFFC", "SRCI", "TRCI", "WCCF"];
                        var institutionsToCapture = [cccfText, drciText, mccfText, prcfText, scciText, sciText, sffcText, srciText, trciText, wccfText]

                        // if value for institution = 0, set to blank text. Else display number on legend and highlight institution
                        for(var i = 0; i < propertiesToCapture.length; i++){
                          var id_str = "#title_" + propertiesToCapture[i].toLowerCase()
                          // console.log(fire_data.fireData[this.id][propertiesToCapture[i]])
                          // console.log(institutionsToCapture[i].text("test"))
                          if(fire_data.fireData[this.id][propertiesToCapture[i]] == 0){
                            fire_data.fireData[this.id][propertiesToCapture[i]] = ""
                            d3.select(id_str).classed("selectedIsnt", false)                            
                          }
                          else{
                            institutionsToCapture[i].text(fire_data.fireData[this.id][propertiesToCapture[i]])
                            d3.select(id_str).classed("selectedIsnt", true)
                            // console.log(id_str)
                          }
                        }                      
                        d3.select(this)
                            .classed("selectedProtest", true)
                        //Defines Text which will populate Tooltip when a protest is hovered on  
                        d3.select("#toolTip")
                        // .html(thisData + "<br> Year: " + thisYear + "<br> Description: " + thisDescription)
                        .html("<b>Protest Target:</b> "+ this +"<br><b>Year:</b> " + this.id + "<br> <b>Description:</b> " + this.id)
                        // .html(shortID)
                   })

                   .on("mouseout", function(d,i) { 
                        // console.log("mouse is out!")
                        d3.select(this)
                            .classed("selectedProtest", false)
                        // Blank values on mouseout
                        d3.select("#Interactive_Text").selectAll(".cls-58")
                              .text("")
                        // Unbold all bolded institution tiles
                        d3.select("#Legend_Text_to_Highlight").selectAll(".cls-57")
                              .classed("selectedIsnt", false)
                   });

        d3.select("#Legend_Text_to_Highlight").selectAll(".cls-57")
                // console.log("TEST =", d3.select("#Outlines>circle").selectAll("2018_23"))
                // on mouse hover of legend institution titles
                .on("mouseover", function(d, i){
                    // console.log(this)
                    // console.log(this.id.split("_")[1])
                    inst_str = this.id.split("_")[1].toUpperCase()
                    for(var i in fire_data.fireData){
                      //  console.log(fire_data.fireData[i][inst_str])
                       if(fire_data.fireData[i][inst_str] != 0){
                        // console.log(fire_data.fireData[i][inst_str])
                        // console.log(i.toString())   
                        d3.select(document.getElementById(i.toString())).classed("selectedProtest", true)                        
                      }
                    }
                  })
                
                .on("mouseout", function(d, i){
                    // Take away all highlights from institution hover
                    for(var i in fire_data.fireData){
                      if(fire_data.fireData[i][inst_str] != 0){
                        d3.select(document.getElementById(i.toString())).classed("selectedProtest", false)                        
                      }
                    }
                })
      };

</script>

</body>

</html>